<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Pipelines Masterclass</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        html { -webkit-text-size-adjust: 100%; -ms-text-size-adjust: 100%; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
            height: 100vh;
            overflow: hidden;
        }
        .container {
            width: 100%;
            min-height: 100vh;
            background: white;
            display: flex;
            flex-direction: column;
            position: relative;
        }
        .main-wrapper { display: flex; flex: 1; position: relative; min-height: 0; }
        .sidebar {
            width: 280px;
            background: #f8f9fa;
            border-right: 2px solid #e0e0e0;
            padding: 25px 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
            overflow-x: hidden;
            height: 100vh;
            max-height: 100vh;
            transition: transform 0.3s ease;
            -webkit-overflow-scrolling: touch;
        }
        .content {
            flex: 1;
            padding: 0;
            position: relative;
            overflow: hidden;
            width: 100%;
            height: 100vh;
            -webkit-overflow-scrolling: touch;
        }
        .sidebar-title {
            font-size: 1.6em;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 5px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        .sidebar-title:hover { color: #764ba2; }
        .sidebar-subheading {
            font-size: 0.8em;
            font-weight: 700;
            color: #764ba2;
            margin-top: 18px;
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .sidebar-tabs { display: flex; flex-direction: column; gap: 6px; }
        .sidebar-tab {
            padding: 10px 14px;
            cursor: pointer;
            border: none;
            background: transparent;
            font-size: 0.88em;
            font-weight: 500;
            color: #666;
            text-align: left;
            transition: all 0.3s ease;
            border-radius: 6px;
            border-left: 3px solid transparent;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            min-height: 44px;
        }
        .sidebar-tab:hover { background: #e8e8e8; color: #333; }
        .sidebar-tab:active { transform: scale(0.98); }
        .sidebar-tab.active {
            color: #667eea;
            background: #e8f0ff;
            border-left-color: #667eea;
            font-weight: 600;
        }
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1001;
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 15px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.2em;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }
        .mobile-menu-toggle:hover { background: #764ba2; transform: scale(1.05); }
        .mobile-menu-toggle.active { background: #764ba2; }
        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .sidebar-overlay.active { opacity: 1; pointer-events: auto; }
        @media (max-width: 769px) {
            .sidebar-overlay { display: block; }
        }
        @media (min-width: 769px) {
            .sidebar-overlay { display: none !important; pointer-events: none !important; opacity: 0 !important; }
        }
        .module-content { display: block; animation: fadeIn 0.3s ease; width: 100%; }
        .module-iframe {
            width: 100%;
            height: 100%;
            min-height: 100vh;
            border: none;
            display: none;
            background: white;
            margin: 0;
            padding: 0;
            vertical-align: top;
        }
        .module-iframe.active { display: block; }
        #welcome-container { height: 100%; display: flex; flex-direction: column; }
        #welcome-iframe { display: block; flex: 1; width: 100%; min-height: 0; border: none; margin: 0; padding: 0; }
        #module-container { width: 100%; height: 100%; position: absolute; top: 0; left: 0; right: 0; bottom: 0; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @media (max-width: 1024px) { .sidebar { width: 260px; } .sidebar-title { font-size: 1.4em; } }
        @media (max-width: 768px) {
            .mobile-menu-toggle { display: block; }
            .sidebar {
                position: fixed;
                top: 0; left: 0;
                z-index: 1000;
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            .sidebar.open { transform: translateX(0); }
        }
        @media (max-width: 480px) { .sidebar { width: 100%; padding: 15px; } }
    </style>
</head>
<body>
    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle menu">☰</button>
    <div class="sidebar-overlay" id="sidebar-overlay"></div>
    <div class="container">
        <div class="main-wrapper">
            <div class="sidebar" id="sidebar">
                <div class="sidebar-title" onclick="showWelcome()">Data Pipelines Masterclass</div>
                <div class="sidebar-tabs">
                    <div class="sidebar-subheading">Section 1: Introduction & Purpose</div>
                    <button class="sidebar-tab active" onclick="showModule(1)">1: What Is a Data Pipeline?</button>
                    <button class="sidebar-tab" onclick="showModule(2)">2: Why Pipelines Matter & Roles</button>
                    <button class="sidebar-tab" onclick="showModule(3)">3: Use Case — From Spreadsheets to Pipeline</button>
                    <div class="sidebar-subheading">Section 2: Data Ingestion</div>
                    <button class="sidebar-tab" onclick="showModule(4)">4: Ingestion Fundamentals</button>
                    <button class="sidebar-tab" onclick="showModule(5)">5: Connectors, APIs & Reliability</button>
                    <button class="sidebar-tab" onclick="showModule(6)">6: Use Case — Ingest and Land</button>
                    <div class="sidebar-subheading">Section 3: ETL & Medallion</div>
                    <button class="sidebar-tab" onclick="showModule(7)">7: ETL Fundamentals</button>
                    <button class="sidebar-tab" onclick="showModule(8)">8: Medallion & Incremental</button>
                    <button class="sidebar-tab" onclick="showModule(9)">9: Use Case — Medallion in Practice</button>
                    <div class="sidebar-subheading">Section 4: Data Management</div>
                    <button class="sidebar-tab" onclick="showModule(10)">10: Engineering Practices</button>
                    <button class="sidebar-tab" onclick="showModule(11)">11: Cleaning, Validation & Quality</button>
                    <button class="sidebar-tab" onclick="showModule(12)">12: Use Case — From Raw to Curated</button>
                    <div class="sidebar-subheading">Section 5: Storage</div>
                    <button class="sidebar-tab" onclick="showModule(13)">13: Storage Types & Trade-offs</button>
                    <button class="sidebar-tab" onclick="showModule(14)">14: Warehouses, Lakes, Marts & Cubes</button>
                    <button class="sidebar-tab" onclick="showModule(15)">15: Use Case — Storage Strategy</button>
                    <div class="sidebar-subheading">Section 6: Analytics</div>
                    <button class="sidebar-tab" onclick="showModule(16)">16: Pipeline to Analytics</button>
                    <button class="sidebar-tab" onclick="showModule(17)">17: Power BI</button>
                    <button class="sidebar-tab" onclick="showModule(18)">18: Tableau</button>
                    <button class="sidebar-tab" onclick="showModule(19)">19: Use Case — End-to-End Report</button>
                    <div class="sidebar-subheading">Section 7: Capstone & Simulation</div>
                    <button class="sidebar-tab" onclick="showModule(20)">20: Capstone — Full Pipeline</button>
                    <button class="sidebar-tab" onclick="showModule(21)">21: Simulation & Holistic View</button>
                    <button class="sidebar-tab" onclick="showModule(22)">22: Layered Pipeline View</button>
                    <button class="sidebar-tab" onclick="showModule(23)">23: Roadmap & Next Steps</button>
                </div>
            </div>
            <div class="content">
                <div id="welcome-container" class="module-content active">
                    <iframe id="welcome-iframe" class="module-iframe" src="modules/welcome.html"></iframe>
                </div>
                <div id="module-container" class="module-content" style="display: none;"></div>
            </div>
        </div>
    </div>
    <script>
        const totalModules = 23;
        let courseStarted = false;
        let currentModule = 1;
        const iframes = {};

        function initializeIframes() {
            const container = document.getElementById('module-container');
            if (container.children.length > 0) return;
            for (let i = 1; i <= totalModules; i++) {
                const iframe = document.createElement('iframe');
                iframe.id = 'module-iframe-' + i;
                iframe.className = 'module-iframe';
                iframe.setAttribute('scrolling', 'yes');
                iframe.src = 'modules/module-' + i + '.html';
                container.appendChild(iframe);
                iframes[i] = iframe;
            }
        }

        function showModule(moduleNumber) {
            if (!courseStarted) startCourse();
            currentModule = moduleNumber;
            Object.keys(iframes).forEach(function(k) {
                const n = parseInt(k, 10);
                iframes[n].classList.remove('active');
            });
            if (iframes[moduleNumber]) iframes[moduleNumber].classList.add('active');
            document.querySelectorAll('.sidebar-tab').forEach(function(tab, idx) {
                tab.classList.toggle('active', idx === moduleNumber - 1);
            });
            var contentEl = document.querySelector('.content');
            if (contentEl) contentEl.scrollTop = 0;
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            if (window.innerWidth <= 768 && sidebar && overlay) {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
                document.getElementById('mobile-menu-toggle').classList.remove('active');
            }
        }

        function showWelcome() {
            document.getElementById('welcome-container').style.display = 'block';
            document.getElementById('module-container').style.display = 'none';
            document.querySelectorAll('.sidebar-tab').forEach(t => t.classList.remove('active'));
            document.querySelector('.content').scrollTop = 0;
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('sidebar-overlay');
            if (sidebar) sidebar.classList.remove('open');
            if (overlay) overlay.classList.remove('active');
            document.getElementById('mobile-menu-toggle').classList.remove('active');
        }

        function startCourse() {
            courseStarted = true;
            try { localStorage.setItem('courseStarted', 'true'); } catch (e) {}
            document.getElementById('welcome-container').style.display = 'none';
            document.getElementById('module-container').style.display = 'block';
            initializeIframes();
            showModule(1);
        }

        window.addEventListener('message', function(e) {
            if (e.data && e.data.type === 'startCourse') startCourse();
        });

        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('courseStarted') === 'true' || (window.location.search && window.location.search.indexOf('skipWelcome') !== -1)) {
                startCourse();
            }
            const toggle = document.getElementById('mobile-menu-toggle');
            const overlay = document.getElementById('sidebar-overlay');
            const sidebar = document.getElementById('sidebar');
            function openMenu() {
                sidebar.classList.add('open');
                overlay.classList.add('active');
                toggle.classList.add('active');
            }
            function closeMenu() {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
                toggle.classList.remove('active');
            }
            toggle.addEventListener('click', function() {
                if (sidebar.classList.contains('open')) closeMenu();
                else openMenu();
            });
            overlay.addEventListener('click', closeMenu);
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) closeMenu();
            });
            document.addEventListener('keydown', function(e) {
                if (e.key === 'ArrowLeft' && currentModule > 1) showModule(currentModule - 1);
                if (e.key === 'ArrowRight' && currentModule < totalModules) showModule(currentModule + 1);
            });
        });
    </script>
</body>
</html>
