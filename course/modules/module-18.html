<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 18: Tableau</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f9f9f9; padding: 20px; color: #444; line-height: 1.6; }
        h2 { color: #667eea; border-bottom: 2px solid #667eea; padding-bottom: 8px; margin-bottom: 16px; }
        h3 { color: #764ba2; margin: 20px 0 10px; }
        .plain-terms { background: #f0f7ff; border-left: 4px solid #764ba2; padding: 15px; border-radius: 4px; margin: 16px 0; }
        .example-box { background: white; border: 2px solid #e0e0e0; border-radius: 8px; padding: 20px; margin: 16px 0; }
        .step-box { background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 18px; margin: 16px 0; }
        .info-box { background: #e8f4f8; border-left: 4px solid #667eea; padding: 15px; border-radius: 4px; margin: 16px 0; }
        .calculation-box { font-family: monospace; background: #e8f0ff; padding: 12px; border-radius: 6px; margin: 12px 0; border-left: 4px solid #667eea; }
        .diagram-box { background: #fff; border: 2px solid #e0e0e0; border-radius: 8px; padding: 20px; margin: 20px 0; overflow-x: auto; }
        .diagram-box .diagram-title { font-weight: bold; color: #764ba2; margin-bottom: 12px; }
        .code-block { margin: 16px 0; border-radius: 8px; overflow: hidden; border: 1px solid #ddd; }
        .code-block .code-lang { background: #667eea; color: white; padding: 6px 12px; font-size: 0.85em; }
        .code-block pre { margin: 0; padding: 14px; background: #1e1e1e; color: #d4d4d4; font-size: 0.9em; overflow-x: auto; }
        .quiz-section { background: white; border: 2px solid #667eea; border-radius: 8px; padding: 24px; margin-top: 24px; }
        .quiz-question { background: #f8f9fa; border-left: 4px solid #764ba2; padding: 16px; margin: 12px 0; border-radius: 4px; }
        .quiz-options { list-style: none; padding-left: 0; }
        .quiz-options li { background: white; border: 1px solid #ddd; padding: 10px; margin: 6px 0; border-radius: 6px; }
        .quiz-answer { display: none; border-left: 4px solid #28a745; padding: 12px; margin-top: 8px; background: #d4edda; border-radius: 4px; }
        .quiz-answer.show { display: block; }
        .show-answer-btn { background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 8px; }
        .show-answer-btn:disabled { opacity: 0.7; cursor: not-allowed; background: #6c757d; }
        .key-insight { background: linear-gradient(135deg, #f0f7ff 0%, #e8f0ff 100%); border-left: 4px solid #764ba2; padding: 18px 20px; border-radius: 6px; margin: 20px 0; font-size: 1.05em; line-height: 1.7; }
        .key-insight strong { color: #764ba2; }
        .key-takeaways { background: #d4edda; border-left: 4px solid #28a745; padding: 20px; border-radius: 6px; margin: 24px 0; }
        .key-takeaways h4 { color: #155724; margin-top: 0; margin-bottom: 12px; font-size: 1.15em; }
        .key-takeaways ul { margin: 0; padding-left: 22px; }
        .key-takeaways li { margin-bottom: 8px; line-height: 1.6; }
    </style>
</head>
<body>
    <h2>Module 18: Tableau — Data Model, Calculations & Dashboards</h2>

    <h3>What Is Tableau?</h3>
    <p><strong>Tableau</strong> connects to tables or files and uses <strong>dimensions</strong> (categories) and <strong>measures</strong> (numbers). You build views by placing fields on rows, columns, and marks. <strong>Calculated fields</strong> include LOD (level of detail) and table calculations. <strong>Dashboards</strong> combine views with actions (filter, highlight); <strong>stories</strong> tell a narrative. Extracts and filters affect performance; Server/Cloud handle scheduling and permissions.</p>

    <div class="key-insight">
        <strong>Key insight:</strong> Dimensions and measures on shelves drive the view; LOD and table calcs control aggregation. Dashboards with actions (filter, highlight) make reports interactive; extracts improve performance.
    </div>

    <div class="diagram-box">
        <div class="diagram-title">Tableau flow: Data → Workbook → Dashboard</div>
        <svg viewBox="0 0 420 60" xmlns="http://www.w3.org/2000/svg" style="max-width:100%;height:auto;">
            <defs><marker id="arr18" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto"><path d="M0,0 L0,6 L9,3 z" fill="#667eea"/></marker></defs>
            <rect x="10" y="15" width="85" height="35" rx="4" fill="#e8f0ff" stroke="#667eea"/><text x="52" y="35" text-anchor="middle" font-size="10">Data (Gold/mart)</text>
            <line x1="95" y1="32" x2="123" y2="32" stroke="#667eea" marker-end="url(#arr18)"/>
            <rect x="123" y="15" width="75" height="35" rx="4" fill="#fff3cd" stroke="#ffc107"/><text x="160" y="35" text-anchor="middle" font-size="10">Extract / Live</text>
            <line x1="198" y1="32" x2="226" y2="32" stroke="#667eea" marker-end="url(#arr18)"/>
            <rect x="226" y="15" width="80" height="35" rx="4" fill="#e8f0ff" stroke="#667eea"/><text x="266" y="35" text-anchor="middle" font-size="10">Workbook (views)</text>
            <line x1="306" y1="32" x2="334" y2="32" stroke="#667eea" marker-end="url(#arr18)"/>
            <rect x="334" y="15" width="80" height="35" rx="4" fill="#d4edda" stroke="#28a745"/><text x="374" y="35" text-anchor="middle" font-size="10">Dashboard + actions</text>
        </svg>
    </div>

    <h3>Data model and calculations</h3>
    <p>Dimensions and measures; shelves (rows, columns, marks). Calculated fields: row-level, LOD (e.g. { FIXED [Customer]: SUM([Revenue]) }), table calcs (% of total, running sum). Parameters let users switch metrics or inputs.</p>
    <div class="code-block">
        <div class="code-lang">Tableau LOD example</div>
        <pre><code>-- Customer-level revenue (FIXED LOD), regardless of view grain
{ FIXED [Customer ID]: SUM([Revenue]) }

-- % of total (table calculation: percent of total, compute by Region)
SUM([Revenue]) / TOTAL(SUM([Revenue]))</code></pre>
    </div>
    <h3>Dashboards and storytelling</h3>
    <p>Dashboard layout; actions (filter, highlight, URL). Stories: sequence of points (e.g. overview → problem → action). Performance: use extracts, limit columns, push filters to the source. Tableau Server/Cloud: scheduling, permissions, sharing.</p>

    <h3>Preparing data for Tableau: Python and R</h3>
    <p><strong>Process:</strong> Tableau connects to a database, file, or extract. You can pre-build the dataset in Python or R (from Gold/mart), then save as CSV, Parquet, or write to a table so Tableau uses it. <strong>Components:</strong> source (Gold/mart), filter/aggregate, output (file or DB). <strong>Outcome:</strong> a single table or extract that Tableau can refresh on a schedule.</p>
    <div class="code-block">
        <div class="code-lang">Python: export Gold subset for Tableau extract</div>
        <pre><code>import pandas as pd
gold = pd.read_parquet("gold/daily_sales_by_region/")
gold = gold[gold["sale_date"] >= "2025-01-01"]
# Tableau can connect to CSV, Excel, or Parquet; or publish extract from DB
gold.to_csv("tableau_input/sales_extract.csv", index=False)</code></pre>
    </div>
    <div class="code-block">
        <div class="code-lang">R: same export for Tableau</div>
        <pre><code>library(arrow); library(dplyr)
sales <- read_parquet("gold/daily_sales_by_region/") %>%
  filter(sale_date >= as.Date("2025-01-01"))
readr::write_csv(sales, "tableau_input/sales_extract.csv")</code></pre>
    </div>

    <h3>Practical use cases</h3>
    <div class="example-box">
        <ul>
            <li>Sales by region and product with “% of total” and “running sum”.</li>
            <li>Parameter: “Select metric” (Revenue, Units, Margin) driving the view.</li>
            <li>Regional dashboard with map + detail table; click region to filter.</li>
        </ul>
    </div>

    <div class="key-takeaways">
        <h4>Key Takeaways</h4>
        <ul>
            <li>Dimensions and measures; rows, columns, marks; calculated fields (LOD, table calcs).</li>
            <li>Dashboards: views + actions (filter, highlight); stories for narrative; extracts for performance.</li>
        </ul>
    </div>

    <h3>Real-World Applications</h3>
    <ul>
        <li><strong>Sales by region:</strong> % of total, running sum; parameter for metric; map + detail with click-to-filter.</li>
    </ul>

    <div class="info-box"><strong>Relationship to other modules:</strong> Module 17 is Power BI; this one is Tableau. Module 19 is the use case (End-to-End Report with both tools).</div>
    <div class="quiz-section">
        <h3>Module Quiz</h3>
        <div class="quiz-question">
            <h4>Q1: What is an LOD expression in Tableau?</h4>
            <ul class="quiz-options"><li>A) A chart type</li><li>B) A calculation at a specified level of detail (e.g. FIXED at customer level)</li></ul>
            <button class="show-answer-btn" id="btn-1" onclick="showAnswer(1)">Show Answer</button>
            <div class="quiz-answer" id="answer-1"><strong>Correct: B.</strong> LOD (level of detail) expressions compute at a different granularity than the view.</div>
        </div>
        <div class="quiz-question">
            <h4>Q2: What are dimensions vs. measures in Tableau?</h4>
            <ul class="quiz-options"><li>A) The same</li><li>B) Dimensions are categories (e.g. region, product); measures are numbers (e.g. SUM(revenue))</li></ul>
            <button class="show-answer-btn" id="btn-2" onclick="showAnswer(2)">Show Answer</button>
            <div class="quiz-answer" id="answer-2"><strong>Correct: B.</strong> Dimensions define the view structure; measures are aggregated.</div>
        </div>
        <div class="quiz-question">
            <h4>Q3: What is a filter action on a dashboard?</h4>
            <ul class="quiz-options"><li>A) A visual type</li><li>B) Clicking an element (e.g. bar, region) filters other views on the dashboard</li></ul>
            <button class="show-answer-btn" id="btn-3" onclick="showAnswer(3)">Show Answer</button>
            <div class="quiz-answer" id="answer-3"><strong>Correct: B.</strong> Actions make dashboards interactive—click to filter or highlight.</div>
        </div>
        <div class="quiz-question">
            <h4>Q4: Why use an extract in Tableau?</h4>
            <ul class="quiz-options"><li>A) To delete data</li><li>B) To improve performance by caching data locally; can be refreshed on a schedule</li></ul>
            <button class="show-answer-btn" id="btn-4" onclick="showAnswer(4)">Show Answer</button>
            <div class="quiz-answer" id="answer-4"><strong>Correct: B.</strong> Extracts speed up dashboards; live connection queries the source each time.</div>
        </div>
        <div class="quiz-question">
            <h4>Q5: What is a table calculation in Tableau?</h4>
            <ul class="quiz-options"><li>A) A row-level formula</li><li>B) A calculation that depends on the table layout (e.g. % of total, running sum)</li></ul>
            <button class="show-answer-btn" id="btn-5" onclick="showAnswer(5)">Show Answer</button>
            <div class="quiz-answer" id="answer-5"><strong>Correct: B.</strong> Table calcs are computed from the current view structure.</div>
        </div>
    </div>
    <script>function showAnswer(n){var a=document.getElementById('answer-'+n),b=document.getElementById('btn-'+n);if(a&&b){a.classList.add('show');b.disabled=true;b.textContent='Answer Revealed';}}</script>
<script>(function(){function sendHeight(){try{var body=document.body,html=document.documentElement;var h=Math.max(body.scrollHeight,body.offsetHeight,html.scrollHeight,html.offsetHeight,html.clientHeight||0);if(h<=0)return;var path=window.location.pathname||window.location.href||'';var m=path.match(/module-(\d+)\.html/);if(m)window.parent.postMessage({type:'setIframeHeight',height:h,moduleId:parseInt(m[1],10)},'*');}catch(e){}}sendHeight();setTimeout(sendHeight,100);setTimeout(sendHeight,400);setTimeout(sendHeight,1000);})();</script>
</body>
</html>
