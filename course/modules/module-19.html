<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 19: Use Case — End-to-End Report</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #f9f9f9; padding: 20px; color: #444; line-height: 1.6; }
        h2 { color: #667eea; border-bottom: 2px solid #667eea; padding-bottom: 8px; margin-bottom: 16px; }
        h3 { color: #764ba2; margin: 20px 0 10px; }
        .plain-terms { background: #f0f7ff; border-left: 4px solid #764ba2; padding: 15px; border-radius: 4px; margin: 16px 0; }
        .example-box { background: white; border: 2px solid #e0e0e0; border-radius: 8px; padding: 20px; margin: 16px 0; }
        .step-box { background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; padding: 18px; margin: 16px 0; }
        .info-box { background: #e8f4f8; border-left: 4px solid #667eea; padding: 15px; border-radius: 4px; margin: 16px 0; }
        .success-box { background: #d4edda; border-left: 4px solid #28a745; padding: 15px; border-radius: 4px; margin: 16px 0; }
        .quiz-section { background: white; border: 2px solid #667eea; border-radius: 8px; padding: 24px; margin-top: 24px; }
        .quiz-question { background: #f8f9fa; border-left: 4px solid #764ba2; padding: 16px; margin: 12px 0; border-radius: 4px; }
        .quiz-options { list-style: none; padding-left: 0; }
        .quiz-options li { background: white; border: 1px solid #ddd; padding: 10px; margin: 6px 0; border-radius: 6px; }
        .quiz-answer { display: none; border-left: 4px solid #28a745; padding: 12px; margin-top: 8px; background: #d4edda; border-radius: 4px; }
        .quiz-answer.show { display: block; }
        .show-answer-btn { background: #28a745; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 8px; }
        .show-answer-btn:disabled { opacity: 0.7; cursor: not-allowed; background: #6c757d; }
        .key-insight { background: linear-gradient(135deg, #f0f7ff 0%, #e8f0ff 100%); border-left: 4px solid #764ba2; padding: 18px 20px; border-radius: 6px; margin: 20px 0; font-size: 1.05em; line-height: 1.7; }
        .key-insight strong { color: #764ba2; }
        .key-takeaways { background: #d4edda; border-left: 4px solid #28a745; padding: 20px; border-radius: 6px; margin: 24px 0; }
        .key-takeaways h4 { color: #155724; margin-top: 0; margin-bottom: 12px; font-size: 1.15em; }
        .key-takeaways ul { margin: 0; padding-left: 22px; }
        .key-takeaways li { margin-bottom: 8px; line-height: 1.6; }
        .code-block { background: #1e1e1e; color: #d4d4d4; border-radius: 8px; overflow: hidden; margin: 16px 0; }
        .code-lang { background: #333; color: #9cdcfe; padding: 8px 12px; font-size: 0.9em; }
        .code-block pre { margin: 0; padding: 16px; overflow-x: auto; }
        .code-block code { font-family: 'Consolas', 'Monaco', monospace; font-size: 0.9em; }
        h4 { color: #667eea; margin: 14px 0 8px; font-size: 1em; }
        table { border-collapse: collapse; width: 100%; margin: 12px 0; }
        th { background: #667eea; color: white; padding: 8px 10px; text-align: left; }
        td { padding: 8px 10px; border: 1px solid #e0e0e0; }
        tr:nth-child(even) { background: #f8f9fa; }
    </style>
</head>
<body>
    <h2>Module 19: Use Case — End-to-End Report</h2>

    <h3>What This Use Case Covers</h3>
    <p>Use the Gold (or curated) dataset from earlier sections. Build (1) one Power BI report (data model + 2–3 visuals + one DAX measure) and (2) one Tableau workbook (2 views + one dashboard with an action). Document data source and refresh. Generic reporting patterns.</p>

    <div class="key-insight">
        <strong>Key insight:</strong> One report in each tool ties pipeline output to consumption. The report card (purpose, audience, refresh, one improvement) is the handoff document between engineer and analyst.
    </div>

    <h3>Business use case: NorthStar Retail Regional Sales Performance</h3>
    <p><strong>Who needs it:</strong> Regional managers (North, South, West) and the sales leadership team. They need a single place to see daily revenue and order counts by region and product, compare performance, and spot where to focus inventory and promotions.</p>
    <p><strong>Business problem:</strong> Before the report, regional leads got ad hoc exports or had to ask analytics for numbers. Decisions (e.g. “Which region underperformed this week?” or “How does North compare to last year?”) were slow and inconsistent. The business wanted one certified report, refreshed daily from the same Gold table the pipeline produces.</p>
    <p><strong>Decisions the report supports:</strong> (1) Where to allocate inventory and markdowns. (2) Which products to push in which region. (3) Whether a region is on track vs. prior period or target. (4) Quick answers for leadership (“What’s total revenue this month?”) without opening multiple tools.</p>
    <p><strong>Success criteria:</strong> Report loads from Gold (or mart) with one click or scheduled refresh; regional managers can filter to their region (or see all); at least one comparison measure (e.g. Revenue YoY % or vs. prior week); report card documents purpose, audience, source, and one improvement for the next iteration.</p>

    <h3>Data examples: what feeds the report</h3>
    <p>The report consumes the same <strong>Gold</strong> (or mart) dataset used in Modules 9, 12, and 17. Below: sample data that could be exported for Power BI and Tableau.</p>

    <h4>Gold table (or mart) — source for the report</h4>
    <div class="example-box">
        <p><strong>gold.daily_sales_by_product_region</strong> (or <code>report_input/sales_unified.parquet</code> after export). Sample rows:</p>
        <table>
            <tr><th>sale_date</th><th>product_id</th><th>product_name</th><th>region_id</th><th>revenue</th><th>order_count</th></tr>
            <tr><td>2025-01-08</td><td>P1</td><td>Widget Pro</td><td>North</td><td>59.98</td><td>2</td></tr>
            <tr><td>2025-01-08</td><td>P2</td><td>Basic Cable</td><td>South</td><td>14.50</td><td>1</td></tr>
            <tr><td>2025-01-08</td><td>P3</td><td>Power Pack</td><td>West</td><td>49.00</td><td>1</td></tr>
            <tr><td>2025-01-09</td><td>P1</td><td>Widget Pro</td><td>North</td><td>29.99</td><td>1</td></tr>
            <tr><td>2025-01-09</td><td>P2</td><td>Basic Cable</td><td>North</td><td>14.50</td><td>1</td></tr>
        </table>
        <p style="margin:8px 0 0;font-size:0.9em;color:#666;">This is the exact grain and columns the pipeline produces. Power BI and Tableau connect to this (live or via Parquet/CSV export). Optional: add a <strong>DimDate</strong> and <strong>DimRegion</strong> for time intelligence and slicers.</p>
    </div>

    <h4>What the report shows (example numbers from this data)</h4>
    <p>With the five rows above, the report would display the following. This is what stakeholders see and how it ties back to the pipeline.</p>
    <div class="example-box">
        <p><strong>KPI card (no filter):</strong></p>
        <ul>
            <li>Total Revenue: <strong>167.97</strong></li>
            <li>Total Orders: <strong>6</strong></li>
            <li>Revenue YoY %: (e.g. blank or 0 if no prior-year data in the sample)</li>
        </ul>
        <p><strong>Revenue by Region (bar chart or table):</strong></p>
        <table>
            <tr><th>Region</th><th>Revenue</th><th>Order count</th></tr>
            <tr><td>North</td><td>89.97</td><td>3</td></tr>
            <tr><td>South</td><td>14.50</td><td>1</td></tr>
            <tr><td>West</td><td>49.00</td><td>1</td></tr>
        </table>
        <p><strong>Revenue by Product (e.g. matrix or bar):</strong> Widget Pro 89.97, Basic Cable 29.00, Power Pack 49.00. With a <strong>Region</strong> slicer set to North, the same visuals would show only North: revenue 89.97, orders 3; Widget Pro 89.97, Basic Cable 14.50, Power Pack —.</p>
    </div>
    <p>Documenting these numbers in the report card (or in a “sample output” section) helps engineers and analysts verify that the report is reading the right source and that filters and measures behave as expected.</p>

    <h3>Scenario</h3>
    <p>Connect to your Gold/curated table or mart (e.g. <code>gold.daily_sales_by_product_region</code> or <code>report_input/sales_unified.parquet</code>). In Power BI: build a simple model (one fact, dimensions), add 2–3 visuals and one DAX measure (e.g. Revenue YoY %). In Tableau: create 2 views and one dashboard with at least one filter or highlight action. Document: purpose, audience, data source, refresh frequency, and one improvement to do next (“report card”).</p>

    <h4>Example report card (filled for this use case)</h4>
    <div class="step-box">
        <table>
            <tr><th>Field</th><th>Example value</th></tr>
            <tr><td>Purpose</td><td>Regional Sales Performance: daily revenue and orders by region and product for regional managers and sales leadership.</td></tr>
            <tr><td>Audience</td><td>Regional managers (North, South, West), VP Sales.</td></tr>
            <tr><td>Data source</td><td>gold.daily_sales_by_product_region (or mart_regional_sales). Pipeline: Module 9/12 medallion + validation; Gold refreshed daily.</td></tr>
            <tr><td>Refresh frequency</td><td>Daily after Gold load (e.g. 08:00).</td></tr>
            <tr><td>One improvement</td><td>Add prior-week comparison and a target column; or RLS so each regional manager sees only their region by default.</td></tr>
        </table>
    </div>

    <h3>Deliverables</h3>
    <div class="example-box">
        <ul>
            <li>PBIX and TWBX (or links to published reports).</li>
            <li>One-page “report card”: purpose, audience, refresh, one improvement.</li>
        </ul>
    </div>

    <h3>Data source for the report: Python and R</h3>
    <p>Both Power BI and Tableau need a dataset—from a live connection (Gold/mart) or from a file. Prepare it in Python or R with the right grain and date range; one table or file both tools can use. The script below reads the same Gold table that contains the dummy data above and writes a single file for report consumption.</p>
    <div class="code-block">
        <div class="code-lang">Python: Gold export for Power BI and Tableau</div>
        <pre><code>import pandas as pd
# Same Gold table as in the data examples (sale_date, product_id, product_name, region_id, revenue, order_count)
df = pd.read_parquet("gold/daily_sales_by_product_region/")
df = df[df["sale_date"] >= "2025-01-01"]
df.to_parquet("report_input/sales_unified.parquet", index=False)
# Optional: also export CSV for Get Data → Text/CSV in Power BI
# df.to_csv("report_input/sales_unified.csv", index=False)</code></pre>
    </div>
    <div class="code-block">
        <div class="code-lang">R: same flow</div>
        <pre><code>library(arrow); library(dplyr)
sales <- read_parquet("gold/daily_sales_by_product_region/") %>%
  filter(sale_date >= as.Date("2025-01-01"))
write_parquet(sales, "report_input/sales_unified.parquet")</code></pre>
    </div>
    <p>After refresh, <code>report_input/sales_unified.parquet</code> has the same columns and grain as the Gold table. Power BI (Get Data → Parquet or folder) and Tableau (Connect → Parquet) can use this file; or point both tools at the live Gold table in the warehouse for scheduled refresh.</p>

    <h3>By role</h3>
    <div class="step-box">
        <p><strong>Architect:</strong> Define report/dataset governance (who can publish, certification, refresh SLAs, RLS); review one report for compliance.</p>
        <p><strong>Engineer:</strong> Document how the report connects to the pipeline (source table, refresh job); add or validate one performance safeguard.</p>
        <p><strong>Analyst:</strong> Build both Power BI and Tableau deliverables; document report card; trace one visual back to pipeline column and quality check.</p>
    </div>
    <div class="success-box"><strong>Interactive wrap-up:</strong> Demo to a small group; collect one “what I’d add” from each viewer.</div>
    <div class="key-takeaways">
        <h4>Key Takeaways</h4>
        <ul>
            <li>Anchor the use case in a business need: who uses the report, what decisions it supports, and how success is measured (e.g. NorthStar Regional Sales Performance).</li>
            <li>Use concrete data examples: same Gold (or mart) table and sample rows; show what the report displays (KPIs, Revenue by Region, by Product) so pipeline and report stay aligned.</li>
            <li>Power BI: model + 2–3 visuals + one DAX measure; Tableau: 2 views + one dashboard with action. Report card: purpose, audience, data source, refresh frequency, one improvement.</li>
            <li>Trace one visual back to pipeline column and quality check; document governance (publish, certification, RLS).</li>
        </ul>
    </div>

    <h3>Real-World Applications</h3>
    <ul>
        <li><strong>Stakeholder demo:</strong> Same Gold table in Power BI and Tableau; report card for each; one next improvement from viewers.</li>
    </ul>

    <div class="info-box"><strong>Relationship to other modules:</strong> Section 7 (Modules 20–22) is the capstone, simulation, and roadmap.</div>
    <div class="quiz-section">
        <h3>Module Quiz</h3>
        <div class="quiz-question">
            <h4>Q1: What should the report card document?</h4>
            <ul class="quiz-options"><li>A) Only the tool name</li><li>B) Purpose, audience, data source, refresh frequency, and one improvement</li></ul>
            <button class="show-answer-btn" id="btn-1" onclick="showAnswer(1)">Show Answer</button>
            <div class="quiz-answer" id="answer-1"><strong>Correct: B.</strong> Report card captures governance and next steps.</div>
        </div>
        <div class="quiz-question">
            <h4>Q2: Where should the report get its data from?</h4>
            <ul class="quiz-options"><li>A) Bronze only</li><li>B) Gold or curated table/mart</li></ul>
            <button class="show-answer-btn" id="btn-2" onclick="showAnswer(2)">Show Answer</button>
            <div class="quiz-answer" id="answer-2"><strong>Correct: B.</strong> Reports consume business-ready data.</div>
        </div>
        <div class="quiz-question">
            <h4>Q3: What is a DAX measure example for this use case?</h4>
            <ul class="quiz-options"><li>A) A column rename</li><li>B) Revenue YoY % or similar time/comparison measure</li></ul>
            <button class="show-answer-btn" id="btn-3" onclick="showAnswer(3)">Show Answer</button>
            <div class="quiz-answer" id="answer-3"><strong>Correct: B.</strong> Measures add business logic (e.g. YoY %).</div>
        </div>
        <div class="quiz-question">
            <h4>Q4: What Tableau deliverable is required?</h4>
            <ul class="quiz-options"><li>A) Only one view</li><li>B) 2 views and one dashboard with at least one filter or highlight action</li></ul>
            <button class="show-answer-btn" id="btn-4" onclick="showAnswer(4)">Show Answer</button>
            <div class="quiz-answer" id="answer-4"><strong>Correct: B.</strong> Dashboard with actions demonstrates interactivity.</div>
        </div>
        <div class="quiz-question">
            <h4>Q5: Why demo and collect “what I’d add” from viewers?</h4>
            <ul class="quiz-options"><li>A) To avoid improvements</li><li>B) To validate usability and gather improvement ideas</li></ul>
            <button class="show-answer-btn" id="btn-5" onclick="showAnswer(5)">Show Answer</button>
            <div class="quiz-answer" id="answer-5"><strong>Correct: B.</strong> Feedback improves adoption and next iterations.</div>
        </div>
    </div>
    <script>function showAnswer(n){var a=document.getElementById('answer-'+n),b=document.getElementById('btn-'+n);if(a&&b){a.classList.add('show');b.disabled=true;b.textContent='Answer Revealed';}}</script>
<script>(function(){function sendHeight(){try{var body=document.body,html=document.documentElement;var h=Math.max(body.scrollHeight,body.offsetHeight,html.scrollHeight,html.offsetHeight,html.clientHeight||0);if(h<=0)return;var path=window.location.pathname||window.location.href||'';var m=path.match(/module-(\d+)\.html/);if(m)window.parent.postMessage({type:'setIframeHeight',height:h,moduleId:parseInt(m[1],10)},'*');}catch(e){}}sendHeight();setTimeout(sendHeight,100);setTimeout(sendHeight,400);setTimeout(sendHeight,1000);})();</script>
</body>
</html>
